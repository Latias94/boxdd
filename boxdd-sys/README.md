# boxdd-sys â€” Low-level FFI for Box2D v3 (C API)

What this crate does
- Builds the upstream Box2D v3 C sources from the git submodule under `third-party/box2d`.
- Exposes raw FFI in `boxdd_sys::ffi` generated by bindgen (or uses pregenerated bindings).
- Provides minimal math interop via upstream C types; ergonomic conversions live in `boxdd`.

Build modes
- Default: vendored source + bindgen (requires a C toolchain and libclang).
- Docs.rs: bindings only (skips compiling C; uses pregenerated bindings when present).
- Prebuilt static library: set `BOX2D_LIB_DIR=/path/to/lib` to link to an existing static `box2d` and skip compilation. Ensure ABI/CRT/arch and version match.

Pregenerated bindings (docs.rs / offline)
- We commit pregenerated bindings so docs.rs can build offline.
- Refresh bindings with the helper script from the repo root:
  - `python tools/update_submodule_and_bindings.py --profile release`
- This writes `boxdd-sys/src/bindings_pregenerated.rs`. Commit this file before publishing.
- Tip: the script sets `BOXDD_SYS_SKIP_CC=1` so only bindgen runs (faster).

Build notes
- Ensure submodules are initialized: `git submodule update --init --recursive`.
- `build.rs` compiles the C sources via the `cc` crate and runs `bindgen` on headers in `include/`.
- Windows MSVC and Unix toolchains are supported. Box2D v3 is C.

License
- MIT OR Apache-2.0. Upstream Box2D v3 is MIT-licensed; dual-licensing matches common Rust practice.

