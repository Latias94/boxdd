<div align="center">

# boxdd-sys Â· Low-level FFI for Box2D v3 (C API)

[![Crates.io](https://img.shields.io/crates/v/boxdd-sys.svg?style=flat-square)](https://crates.io/crates/boxdd-sys)
[![Docs](https://docs.rs/boxdd-sys/badge.svg)](https://docs.rs/boxdd-sys)
[![License](https://img.shields.io/badge/license-MIT%2FApache--2.0-blue.svg?style=flat-square)](#license)

</div>

Builds upstream Box2D v3 C sources from the vendored submodule under `third-party/box2d`.
Exposes raw FFI in `boxdd_sys::ffi` generated by bindgen (or uses pregenerated bindings).
Ergonomic wrappers live in the companion crate [`boxdd`](https://crates.io/crates/boxdd).

## Build

```bash
git submodule update --init --recursive
cargo build -p boxdd-sys
```

## Build modes
- Default (feature `build-from-source`): build vendored C sources via `cc` and generate bindings via bindgen.
- Prebuilt (feature `prebuilt`): link a precompiled static library `box2d` instead of compiling C sources.
  - Set `BOX2D_LIB_DIR=/path/to/lib` to locate the library; otherwise the linker searches system paths.
- Docs.rs: uses pregenerated bindings when present and skips native C build.

## Regenerate pregenerated bindings (for docs.rs)

```bash
python tools/update_submodule_and_bindings.py --profile release
# writes boxdd-sys/src/bindings_pregenerated.rs and sets BOXDD_SYS_SKIP_CC=1
```

## Notes
- `build.rs` compiles C sources via the `cc` crate and runs `bindgen` on headers under `include/`.
- Windows MSVC and Unix toolchains are supported. Box2D v3 exposes a C API.

## License
- MIT OR Apache-2.0. Upstream Box2D v3 is MIT-licensed.

